name: "JFrog CLI Example"
on: push
#on: release

permissions:
  # This is required for requesting the OIDC token
#  id-token: write
  # This is required for actions/checkout
  contents: read
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Setup JFrog CLI
        uses: jfrog/setup-jfrog-cli@v4
        env:
          # JFrog platform url (for example: https://acme.jfrog.io)
          # JF_URL: ${{ vars.JF_URL }}
          JF_URL: ${{ secrets.JF_URL }}
          JF_USER: ${{ secrets.JF_USER }}
          JF_PASSWORD: ${{ secrets.JF_PASSWORD }}
          RT_URL_L: ${{ env.RT_URL }}

      - name: Run JFrog CLI
        run: |
          npm -v
          jf -v
          jf --help
          echo "Url is $JF_URL"
          echo "User is $RT_URL"
          echo test1 vars as ${{ vars.RT_URL }}
          echo test1 vars as ${{ env.RT_URL_L }}
          echo "Ping the server"
          jf rt ping
#          # Collect environment variables for the build
#          cd npm-example
#          ../jfrog npm-config --repo-resolve npm-remote
#          ../jfrog npm i
#          ../jfrog rt bp